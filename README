Electron coupling to a waveguide mode (Cruz + Leila)

project overleaf: https://www.overleaf.com/7456489821nzcssmvbqncb#9faea3

.- /figures: schemes and figures

.- /permittivities: data of real materials, permittivities from Refractive Index (Si and Ge)

.- global_constants.py: define universal constants to import in all codes 

.- permittivity_epsilon.py: define \epsilon(\omega) of different materials

.- EELS.py: define functions for the EELS from Eq. 3 #paper 228, Eq. 25 paper 149.
this is defined per unit lenght. Later we define an effective lenght propagation Leff
and we integrate over the electron's trajectory.

------------------------ FIG 1 --------------------------------------------------------
.- plot_EELS_per_unit_lenght.py: see the guide modes for different Ee (electron energy)
   plot the dEELS/dy (EELS per unit lenght, not integrated over e- trajectory)
	- plot the EELS(k_parallel,w) to find the waveguide modes of
		- real materials. import function \epsilon_2(\omega)
		- fake materials adding Im(epsi_2) = 0.1 to make the EELS wider and see it better
	- plot the EELS(ze,w) integrated over k_parallel. 
		- ze is an important parameter and it determinates which modes are being excited
---------------------------------------------------------------------------------------
------------------------ FIG 2 : use Leff(k_par) --------------------------------------
.- plot_EELS_integrated_over_kx.py : EELS's spectrum using Leff.
   plot EELS integrated over the y-coordinate by using Leff(k_par)=L0*f(k_par) and integrating over kx from 0 to infty
		 - plot EELS(omega)/L0 vs omega
	
.- plot_EELS_integrated_over_kx_and_omega.py : total EELS.
   plot EELS integrated over the y-coordinate using Leff(k_par), over k_parallel, and over omega from 0 to omega_f
  
   this double integral takes too much time. the integral limits of k_par depend on \omega because I integrate over k_x/k
   with k = omega/c. In addition, epsilon2(omega) depends on energy so is a double integral. 
   		 - plot EELS(omega_f)/L0 vs omega_f
   		 - plot EELS(omega_f)/L0 vs omega_f normalized to the integral of omega from 0 to infty
   		 
   -- will approximate the integrals to a sum to see premilinar results 

.- plot_EELS_integrated_over_kx_and_1mode.py : same as before but the integral over omega is for the TM mode (highest)
		 -  plot EELS/L0 vs b for the highest mode: -1 is the highest (TM1), -2 is the second highest (TM2), etc...

------------------------ FIG 3 --------------------------------------------------------
.- /potential : FIG 3 

---------------------------------------------------------------------------------------

.- plot_compare_EELS_QE_approx.py : read issue#01

.- /plots_EELS_permittivity_extra_loss_%.2f : All figures and data. We add an extra term for the Im(epsilon2), which is 0.01 or 0.10.

---------------------------------------------------------------------------------------

GM 05/15/2025 comments: 
	-add small imaginary part to the epsilon_2(omega) + 0.01 for all frequencies
	-plot of dispersion relation was wrong. label x was kx instead of kpar 
	In addition, the formula from paper #149 ("EELS_no_QE") is defined for positive kx,
	then if I plot as a function of kx I need to be careful with this
	-thickness = 0.2 microns
	-resolve before 1eV to see the waveguide modes 
	-know until which electron distance (ze) we can excite modes
	-see in each case where i am in the dispersion relation
	-reduce the energy electron loss up to 1 eV or 10 eV at most
	-if we are close enough in ze, we can still excite after the guide modes (in that plot we dont need a zoom)

GM 22/05/2025 comments: 
	- change loss to $Im(\epsilon_2) = 0.1$. change it in rocket too (in rocket was added 0.01)
	- fig. 1 with no zoom. go up to energy = 10 eV and bigger k_parallel
	- fig. 2: cut for a fixed ze. 
	- fig. 3: wf up to 10 eV. 

